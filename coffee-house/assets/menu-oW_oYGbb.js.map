{"version":3,"file":"menu-oW_oYGbb.js","sources":["../../scripts/modules/modal.js","../../scripts/modules/menu.js"],"sourcesContent":["const modal = document.querySelector('.modal');\nconst overlay = document.querySelector('.overlay');\n\nexport const openModal = (card) => {\n  if (!modal || !overlay) return;\n\n  const img = modal.querySelector('.modal__img');\n  img.src = card.img;\n  img.alt = card.name;\n\n  const title = modal.querySelector('.modal__title');\n  title.textContent = card.name;\n\n  const text = modal.querySelector('.modal__text');\n  text.textContent = card.description;\n\n  const size = modal.querySelector('._size');\n  const sizeLabels = size.querySelectorAll('label');\n  sizeLabels.forEach((label) => label.remove());\n  Object.values(card.sizes).forEach((value, index) => {\n    const label = document.createElement('label');\n    label.className = 'modal__size';\n\n    const input = document.createElement('input');\n    input.type = 'radio';\n    input.name = 'size';\n    input.value = value['add-price'];\n    if (index === 0) input.checked = true;\n\n    label.append(input);\n    label.append(value.size);\n\n    size.append(label);\n  })\n\n  const add = modal.querySelector('._add');\n  const addLabels = add.querySelectorAll('label');\n  addLabels.forEach((label) => label.remove());\n  Object.values(card.additives).forEach((value) => {\n    const label = document.createElement('label');\n    label.className = 'modal__add';\n\n    const input = document.createElement('input');\n    input.type = 'checkbox';\n    input.name = 'add';\n    input.value = value['add-price'];\n\n    label.append(input);\n    label.append(value.name);\n\n    add.append(label);\n  });\n\n  const priceElem = modal.querySelector('.modal__sum');\n  priceElem.dataset.basePrice = card.price;\n  priceElem.textContent = `$${card.price}`;\n\n  modal.classList.add('open');\n  overlay.classList.add('open');\n  document.body.classList.add('no-scroll');\n}\n\nconst closeBtn = document.querySelector('.modal__btn');\n\nconst closeModal = () => {\n  document.body.classList.remove('no-scroll');\n  [modal, overlay].forEach((item) => item.classList.remove('open'))\n}\n\n[closeBtn, overlay].forEach((item) => item.addEventListener('click', () => closeModal()));\n\nmodal.addEventListener('input', () => {\n  const priceElem = modal.querySelector('.modal__sum');\n  const price = Number(priceElem.dataset.basePrice);\n\n  const sizeInputs = Array.from(modal.querySelectorAll('._size input'));\n  const sizeInputChecked = sizeInputs.find((elem) => elem.checked);\n  const sizeSum = Number(sizeInputChecked.value);\n  \n  const addInputs = Array.from(modal.querySelectorAll('._add input'));\n  const addInputsChecked = addInputs.filter((elem) => elem.checked);\n  const addSum = addInputsChecked.reduce((sum, elem) => sum + Number(elem.value), 0);\n\n  const sum = price + sizeSum + addSum;\n\n  priceElem.textContent = `$${sum.toFixed(2)}`;\n});\n","import menuJSON from '../../products.json';\nimport { openModal } from './modal';\n\nconst menu = {\n  coffee: [],\n  tea: [],\n  dessert: [],\n}\n\nmenuJSON.forEach((item) => {\n  menu[item.category].push(item);\n});\n\nconst menuCards = document.querySelector('.menu__cards');\nlet currentCategory = 'coffee';\n\nconst getTemplate = (id) => {\n  const template = document.getElementById(id);\n  const clone = template.content.cloneNode(true);\n  return clone.children[0];\n}\n\nconst addCard = (card) => {\n  const cardElement = getTemplate('card');\n  const [img, title, text, price] = \n    ['img', 'title', 'text', 'price'].map((item) => cardElement.querySelector(`.card__${item}`));\n  img.src = card.img;\n  img.alt = card.title;\n  title.textContent = card.name;\n  text.textContent = card.description;\n  price.textContent = `$${card.price}`;\n  cardElement.onclick = () => openModal(card);\n  menuCards.appendChild(cardElement);\n}\n\nconst addCards = (category, addLastElements) => {\n  const arr = menu[category];\n  if (addLastElements) {\n    arr.slice(4).forEach((item) => addCard(item));\n    return;\n  }\n  menuCards.innerHTML = '';\n  if (window.innerWidth <= 768 && arr.length > 4) {\n    arr.slice(0, 4).forEach((item) => addCard(item));\n    const btn = getTemplate('refresh');\n    btn.onclick = () => {\n      addCards(category, true);\n      btn.remove();\n    };\n    menuCards.after(btn);\n    return;\n  }\n  menu[category].forEach((item) => addCard(item));\n}\naddCards(currentCategory);\n\nconst tabs = document.querySelectorAll('.tab');\ntabs.forEach((tab) => {\n  tab.addEventListener('change', (event) => {\n    currentCategory = event.target.getAttribute('value');\n    const btn = document.querySelector('.refresh');\n    if (btn) btn.remove();\n    addCards(currentCategory);\n  });\n});\nlet currentWidth = window.innerWidth;\nwindow.addEventListener('resize', (event) => {\n  if (currentWidth > 768 && event.target.innerWidth > 768) return;\n  if (currentWidth <= 768 && event.target.innerWidth <= 768) return;\n  currentWidth = event.target.innerWidth;\n  const btn = document.querySelector('.refresh');\n  if (btn) btn.remove();\n  addCards(currentCategory);\n});\n"],"names":["sum"],"mappings":"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"}